#############################################
Generating Secrets for Bare Metal Deployments
#############################################

If a bare metal deployment requires secrets, there is a mechanism for gathering the secrets from the 1Password ``Build and Deploy`` vault and then creating the credential file.
To generate a credential file, do the following.

Open the CSC deployment ``installer/`` directory:

.. code-block:: sh

   cd installer

If you have not installed the requirements, please see :doc:`/ops/add-a-onepassword-secret`.
The run:

.. code-block:: sh

   ./export_secrets.sh {{environment}} {{key(s)}}

For example:

.. code-block:: sh

   ./export_secrets.sh tucson-teststand lfa

Multiple files can be generated by specifying more than one key as a comma-delimited list.

For example:

.. code-block:: sh

   ./export_secrets.sh tucson-teststand lfa,love

The created credential file for each key will be named ``.{{key}}_creds.sh``.